newdataframe$slope <- sapply(uniqCandidates[1:5], function (i) coef01(i)[2])
head(newdataframe)
coef01 <- function (x) {
print(x)
print(number_entries)
if (length(!is.na(contribDB_2014_TX$contributor.cfscore[contribDB_2014_TX$recipient.name ==x])) > 3) {
coef(lm(date ~ contributor.cfscore, data = contribDB_2014_TX, subset=(recipient.name == x)))
}
}
coef01(x = "O ROURKE, ROBERT (BETO)")
coef01 <- function (x) {
print(x)
if (length(!is.na(contribDB_2014_TX$contributor.cfscore[contribDB_2014_TX$recipient.name ==x])) > 3) {
coef(lm(date ~ contributor.cfscore, data = contribDB_2014_TX, subset=(recipient.name == x)))
}
}
coef01(x = "O ROURKE, ROBERT (BETO)")
coef01(x = "TEAMSTERS LOCAL 745 DRIVE")
coef01 <- function (x) {
print(x)
if (length(!is.na(contribDB_2014_TX$contributor.cfscore[contribDB_2014_TX$recipient.name ==x])) < 3) {
coef(lm(date ~ contributor.cfscore, data = contribDB_2014_TX, subset=(recipient.name == x)))
}
}
coef01(x = "O ROURKE, ROBERT (BETO)")
coef01(x = "TEAMSTERS LOCAL 745 DRIVE")
contribDB_2014_TX[contribDB_2014_TX$recipient.name =="TEAMSTERS LOCAL 745 DRIVE",]
length(!is.na(contribDB_2014_TX$contributor.cfscore[contribDB_2014_TX$recipient.name =="TEAMSTERS LOCAL 745 DRIVE"])
length(!is.na(contribDB_2014_TX$contributor.cfscore[contribDB_2014_TX$recipient.name =="TEAMSTERS LOCAL 745 DRIVE"])
length(!is.na(contribDB_2014_TX$contributor.cfscore[contribDB_2014_TX$recipient.name =="TEAMSTERS LOCAL 745 DRIVE"]))
length(contribDB_2014_TX$contributor.cfscore[contribDB_2014_TX$recipient.name =="TEAMSTERS LOCAL 745 DRIVE"])
length(is.na(contribDB_2014_TX$contributor.cfscore[contribDB_2014_TX$recipient.name =="TEAMSTERS LOCAL 745 DRIVE"]))
length(!is.na(contribDB_2014_TX$contributor.cfscore[contribDB_2014_TX$recipient.name =="TEAMSTERS LOCAL 745 DRIVE"]))
length((contribDB_2014_TX$contributor.cfscore[contribDB_2014_TX$recipient.name =="TEAMSTERS LOCAL 745 DRIVE"]), na.rm=T)
length((contribDB_2014_TX$contributor.cfscore[contribDB_2014_TX$recipient.name =="O ROURKE, ROBERT (BETO)"]), na.rm=T)
length(contribDB_2014_TX$contributor.cfscore[contribDB_2014_TX$recipient.name =="O ROURKE, ROBERT (BETO)"])
length(contribDB_2014_TX$contributor.cfscore[contribDB_2014_TX$recipient.name =="O ROURKE, ROBERT (BETO)"])
contribDB_2014_TX[contribDB_2014_TX$recipient.name =="TEAMSTERS LOCAL 745 DRIVE",]
coef01(x = "TEAMSTERS LOCAL 745 DRIVE")
coef01(x = "O ROURKE, ROBERT (BETO)")
coef01 <- function (x) {
print(x)
if (abs(sum(contribDB_2014_TX$contributor.cfscore[contribDB_2014_TX$recipient.name ==x])) < 0) {
coef(lm(date ~ contributor.cfscore, data = contribDB_2014_TX, subset=(recipient.name == x)))
}
}
coef01 <- function (x) {
print(x)
if (abs(sum(contribDB_2014_TX$contributor.cfscore[contribDB_2014_TX$recipient.name ==x])) > 0) {
coef(lm(date ~ contributor.cfscore, data = contribDB_2014_TX, subset=(recipient.name == x)))
}
}
coef01(x = "O ROURKE, ROBERT (BETO)")
coef01(x = "TEAMSTERS LOCAL 745 DRIVE")
coef01(x = "TEAMSTERS LOCAL 745 DRIVE")
coef01 <- function (x) {
print(x)
if (abs(sum(contribDB_2014_TX$contributor.cfscore[contribDB_2014_TX$recipient.name ==x])) > 0) {
coef(lm(date ~ contributor.cfscore, data = contribDB_2014_TX, subset=(recipient.name == x)))
},NA
coef01 <- function (x) {
print(x)
if (abs(sum(contribDB_2014_TX$contributor.cfscore[contribDB_2014_TX$recipient.name ==x])) > 0) {
coef(lm(date ~ contributor.cfscore, data = contribDB_2014_TX, subset=(recipient.name == x)))
}
}
coef01(x = "O ROURKE, ROBERT (BETO)")
coef01(x = "TEAMSTERS LOCAL 745 DRIVE")
coef01 <- function (x) {
print(x)
if (abs(sum(contribDB_2014_TX$contributor.cfscore[contribDB_2014_TX$recipient.name ==x])) > 0) {
coef(lm(date ~ contributor.cfscore, data = contribDB_2014_TX, subset=(recipient.name == x)), na.rm=T)
}
}
coef01(x = "O ROURKE, ROBERT (BETO)")
coef01(x = "TEAMSTERS LOCAL 745 DRIVE")
coef01 <- function (x) {
print(x)
if (abs(sum(contribDB_2014_TX$contributor.cfscore[contribDB_2014_TX$recipient.name ==x])) > 0) {
coef(lm(date ~ contributor.cfscore, data = contribDB_2014_TX, subset=(recipient.name == x)))
}
}
coef01(x = "O ROURKE, ROBERT (BETO)")
coef01(x = "TEAMSTERS LOCAL 745 DRIVE")
abs(sum(contribDB_2014_TX$contributor.cfscore[contribDB_2014_TX$recipient.name =="TEAMSTERS LOCAL 745 DRIVE"]))
newdataframe <- data.frame(recipient.name = TX_uniques[1:5])
head(newdataframe)
newdataframe$intercept <- sapply(uniqCandidates[1:5], function (i) coef01(i)[1])
newdataframe$slope <- sapply(uniqCandidates[1:5], function (i) coef01(i)[2])
abs(sum(contribDB_2014_TX$contributor.cfscore[contribDB_2014_TX$recipient.name =="FLUOR CORPORATION POLITICAL ACTION COMMITTEE (FLUOR PAC)"]))
coef01(x = "FLUOR CORPORATION POLITICAL ACTION COMMITTEE (FLUOR PAC)")
coef01(x = "O ROURKE, ROBERT (BETO)")
contribDB_2014_TX %>%
filter(!is.na(contributor.cfscore))
contribDB_2014_TX %>%
filter(!is.na(contributor.cfscore)) -> contribDB_2014_TX02
coef01(x = "FLUOR CORPORATION POLITICAL ACTION COMMITTEE (FLUOR PAC)")
coef01(x = "O ROURKE, ROBERT (BETO)")
coef01(x = "TEAMSTERS LOCAL 745 DRIVE")
contribDB_2014_TX[contribDB_2014_TX$recipient.name =="TEAMSTERS LOCAL 745 DRIVE",]
coef01 <- function (x) {
coef(lm(date ~ contributor.cfscore, data = contribDB_2014_TX02, subset=(recipient.name == x)))}
coef01(x = "FLUOR CORPORATION POLITICAL ACTION COMMITTEE (FLUOR PAC)")
coef01(x = "O ROURKE, ROBERT (BETO)")
coef01(x = "TEAMSTERS LOCAL 745 DRIVE")
contribDB_2014_TX[contribDB_2014_TX02$recipient.name =="TEAMSTERS LOCAL 745 DRIVE",]
contribDB_2014_TX02[contribDB_2014_TX02$recipient.name =="TEAMSTERS LOCAL 745 DRIVE",]
TX_uniques02 <- unique(contribDB_2014_TX02$recipient.name)
newdataframe <- data.frame(recipient.name = TX_uniques02[1:5])
head(newdataframe)
newdataframe$intercept <- sapply(TX_uniques02[1:5], function (i) coef01(i)[1])
newdataframe$slope <- sapply(TX_uniques[1:5], function (i) coef01(i)[2])
newdataframe
newdataframe$slope <- sapply(TX_uniques02[1:5], function (i) coef01(i)[2])
newdataframe
newdataframe <- data.frame(recipient.name = TX_uniques02)
head(newdataframe)
newdataframe$intercept <- sapply(TX_uniques02, function (i) coef01(i)[1])
newdataframe$intercept <- sapply(TX_uniques02, function (i) coef01(i)[1])
[2])
head(newdataframe)
newdataframe$slope <- sapply(TX_uniques02, function (i) coef01(i)[2])
r
head(newdataframe)
leftjoin(newdataframe, PoliticalIdeology2014, by = recipient.name)
left_join(newdataframe, PoliticalIdeology2014, by = recipient.name)
left_join(newdataframe, PoliticalIdeology2014, by = "recipient.name"")
left_join(newdataframe, PoliticalIdeology2014, by = "recipient.name")
left_join(newdataframe, PoliticalIdeology, by = "recipient.name")
left_join(newdataframe, PoliticalIdeology2014, by = "recipient.name")
left_join(newdataframe, PoliticalIdeology2014)
head(PoliticalIdeology2014
)
# Basic function, for Beto
contribDB_2014_TX %>%
filter(recipient.name == "O ROURKE, ROBERT (BETO)")
coef(lm(date ~ contributor.cfscore, data = contribDB_2014_TX, subset=(bonica.rid == "cand44995")))
# Function - success!
coef02 <- function (x) {
coef(lm(date ~ contributor.cfscore, data = contribDB_2014_TX02, subset=(boncia.rid == x)))}
# Testing the series
newdataframe <- data.frame(recipient.name = TX_uniques02[1:5])
head(newdataframe)
# Testing the series
newdataframe <- data.frame(bonica.rid = TX_uniques02[1:5])
head(newdataframe)
# Building list of uniques to run the function on
TX_uniques02 <- unique(contribDB_2014_TX02$bonica.rid)
# Testing the series
newdataframe <- data.frame(bonica.rid = TX_uniques02[1:5])
head(newdataframe)
newdataframe$intercept <- sapply(TX_uniques02[1:5], function (i) coef02(i)[1])
coef(lm(date ~ contributor.cfscore, data = contribDB_2014_TX02, subset=(bonica.rid == x)))}
# Function - success!
coef02 <- function (x) {
coef(lm(date ~ contributor.cfscore, data = contribDB_2014_TX02, subset=(bonica.rid == x)))}
newdataframe$intercept <- sapply(TX_uniques02[1:5], function (i) coef02(i)[1])
head(newdataframe)
newdataframe$slope <- sapply(TX_uniques02[1:5], function (i) coef02(i)[2])
# Running the above on the larger frame
newdataframe <- data.frame(recipient.name = TX_uniques02)
head(newdataframe)
newdataframe$intercept <- sapply(TX_uniques02, function (i) coef02(i)[1])
newdataframe$intercept <- sapply(TX_uniques02, function (i) coef02(i)[1])
newdataframe$slope <- sapply(TX_uniques02, function (i) coef01(i)[2])
head(newdataframe)
newdataframe$slope <- sapply(TX_uniques02, function (i) coef02(i)[2])
head(newdataframe)
left_join(newdataframe, PoliticalIdeology2014)
newdataframe %>% rename(recipient.name = bonica.rid) %>% newdataframe
newdataframe %>% rename(bonica.rid = recipient.name) %>% newdataframe
head(newdataframe)
newdataframe %>% rename(recipient.name = bonica.rid) -> newdataframe
newdataframe %>% rename(bonica.rid = recipient.name) -> newdataframe
head(newdataframe)
left_join(newdataframe, PoliticalIdeology2014)
left_join(newdataframe, PoliticalIdeology2014, by = "bonica_rid")
left_join(newdataframe, PoliticalIdeology2014, by = "bonica.rid")
View(PoliticalIdeology2014)
left_join(newdataframe, PoliticalIdeology2014, by = c("bonica.rid" = "bonica_rid")
left_join(newdataframe, PoliticalIdeology2014, by = c("bonica.rid" = "bonica_rid"))
left_join(newdataframe, PoliticalIdeology2014, by = c("bonica.rid" = "bonica_rid"))
politislope <- left_join(newdataframe, PoliticalIdeology2014, by = c("bonica.rid" = "bonica_rid"))
View(politislope)
politislope %>%
filter(!is.na(cycle)) -> candislope
View(candislope)
summary(glm(pwinner~slope*party, data = candislope, family = binomial))
summary(glm(gwinner~slope*party, data = candislope, family = binomial))
summary(glm(pwinner~slope+party, data = candislope, family = binomial))
summary(glm(gwinner~slope+party, data = candislope, family = binomial))
knitr::opts_chunk$set(echo = TRUE, cache = TRUE, message=FALSE, warning=FALSE)
library(tidyverse)
library(ff)
library(data.table)
# All data, by party
ggplot(data = PoliticalIdeology) +
geom_point(mapping = aes(x = recipient_cfscore , y = total_receipts, color=party))
# All data, by win/loss
ggplot(data = PoliticalIdeology) +
geom_point(mapping = aes(x = recipient_cfscore , y = total_receipts, color=gwinner))
# Republican winners and losers
ggplot(data = subset(PoliticalIdeology, party=="R")) +
geom_point(mapping = aes(x = recipient_cfscore , y = total_receipts, color=gwinner))
ggplot(data = subset(contribDB_2014, recipient.name == "SCALISE, STEPHEN J")) +
geom_point(mapping = aes(x = date, y = contributor.cfscore, size = amount)) + theme_minimal() + labs(list(title='', x='', y='')) + theme(axis.ticks = element_blank(), axis.text.x = element_blank())
# Beto2014 trend line
ggplot(data = subset(contribDB_2014, recipient.name == "O ROURKE, ROBERT (BETO)")) + geom_point(mapping = aes(x = date, y = contributor.cfscore)) + geom_smooth(mapping = aes(x = date, y = contributor.cfscore), method="lm") + theme_minimal()
View(PoliticalIdeology2014)
library(lmer)
install.packages("lmer")
library(lmer)
install.packages("lmer")
install.packages("lme4")
library(lme4)
fm1 <- lmer(pwinner ~ date + (date | contributor.cfscore), contribDB_2014)
names(contribDB_2014)
joined.2014 <- left_join(contribDB_2014, PoliticalIdeology2014, by = c("bonica.rid" = "bonica_rid"))
fm1 <- lmer(pwinner ~ date + (date | contributor.cfscore), joined.2014)
knitr::opts_chunk$set(echo = TRUE, cache = TRUE, message=FALSE, warning=FALSE)
# Installing Necessary Packages
# source("http://washuresearch.org/stockfunctions.R")
library(tidyverse)
library(ff)
library(data.table)
library(lme4)
#Political ideology
PoliticalIdeology <- read_csv("Political_Data/dime_cong_elections_current.csv")
PoliticalIdeology %>% transform(total_receipts = as.numeric(total_receipts)) -> PoliticalIdeology
#Political ideology
PoliticalIdeology <- read_csv("data/dime_cong_elections_current.csv")
setwd("~/Documents/GitHub/Effectuation")
#Political ideology
PoliticalIdeology <- read_csv("data/dime_cong_elections_current.csv")
#Political ideology
PoliticalIdeology <- read_csv("/data/dime_cong_elections_current.csv")
#Political ideology
PoliticalIdeology <- read_csv("Effectuation/data/dime_cong_elections_current.csv")
#Political ideology
PoliticalIdeology <- read_csv("/Effectuation/data/dime_cong_elections_current.csv")
#Political ideology
PoliticalIdeology <- read_csv("data/dime_cong_elections_current.csv")
setwd("~/Documents/GitHub/Effectuation")
#Political ideology
PoliticalIdeology <- read_csv("data/dime_cong_elections_current.csv")
setwd("~/Documents/GitHub")
#Political ideology
PoliticalIdeology <- read_csv("data/dime_cong_elections_current.csv")
knitr::opts_chunk$set(echo = TRUE, cache = TRUE, message=FALSE, warning=FALSE)
#Political ideology
PoliticalIdeology <- read_csv("data/dime_cong_elections_current.csv")
knitr::opts_chunk$set(echo = TRUE, cache = TRUE, message=FALSE, warning=FALSE)
# Installing Necessary Packages
# source("http://washuresearch.org/stockfunctions.R")
library(tidyverse)
library(ff)
library(data.table)
library(lme4)
#Political ideology
PoliticalIdeology <- read_csv("data/dime_cong_elections_current.csv")
#Political ideology
PoliticalIdeology <- read_csv("data/dime_cong_elections_current.csv")
library(readr)
PoliticalIdeology <- read_csv("data/dime_cong_elections_current.csv")
View(dime_cong_elections_current)
setwd("~/Documents/GitHub/Effectuation")
#Political ideology
PoliticalIdeology <- read_csv("data/dime_cong_elections_current.csv")
PoliticalIdeology %>% transform(total_receipts = as.numeric(total_receipts)) -> PoliticalIdeology
# Loading 2014 contributions
contribDB_2014 <- fread("data/contribDB_2014.csv", select =  c("bonica.rid","transaction.id", "amount","date","contributor.name","contributor.zipcode","recipient.name","seat","contributor.cfscore", "candidate.cfscore", "contributor.state", "recipient.state"))
knitr::opts_chunk$set(echo = TRUE, cache = TRUE, message=FALSE, warning=FALSE)
#Political ideology
PoliticalIdeology <- read_csv("data/dime_cong_elections_current.csv")
PoliticalIdeology %>% transform(total_receipts = as.numeric(total_receipts)) -> PoliticalIdeology
# Loading 2014 contributions
contribDB_2014 <- fread("data/contribDB_2014.csv", select =  c("bonica.rid","transaction.id", "amount","date","contributor.name","contributor.zipcode","recipient.name","seat","contributor.cfscore", "candidate.cfscore", "contributor.state", "recipient.state"))
head(contribDB_2014)
# Setting months and years in contributions
contribDB_2014 %>%
mutate(date = as.Date(date),
month = month(date),
year = year(date)) -> contribDB_2014
joined.2014 <- left_join(contribDB_2014, PoliticalIdeology2014, by = c("bonica.rid" = "bonica_rid"))
joined.2014 <- left_join(contribDB_2014, PoliticalIdeology, by = c("bonica.rid" = "bonica_rid"))
joined.2014 <- left_join(contribDB_2014, PoliticalIdeology, by = c("bonica.rid" = "bonica_rid"))
PoliticalIdeology %>% filter(cycle==2014) -> PoliticalIdeology2014
joined.2014 <- left_join(contribDB_2014, PoliticalIdeology2014, by = c("bonica.rid" = "bonica_rid"))
head(contribDB_2014)
unique(contribDB2014$contributor.state)
names(contribDB_2014$contributor.state)
names(contribDB_2014$contributor.state)
# Sample State Filters
unique(contribDB_2014$recipient.state)
names(contribDB_2014$contributor.state)
table(contribDB_2014$contributor.state)
View(PoliticalIdeology2014)
install.packages("citr")
install.packages("citr")
citr:::insert_citation()
citr:::insert_citation()
citr:::insert_citation()
citr:::insert_citation()
citr:::insert_citation()
citr:::insert_citation()
knitr::opts_chunk$set(echo = TRUE, cache = TRUE, message=FALSE, warning=FALSE)
# Installing Necessary Packages
# source("http://washuresearch.org/stockfunctions.R")
library(tidyverse)
library(ff)
library(data.table)
library(lme4)
PoliticalIdeology %>% transform(total_receipts = as.numeric(total_receipts)) -> PoliticalIdeology
PoliticalIdeology %>% filter(cycle==2014) -> PoliticalIdeology2014
# Setting months and years in contributions
contribDB_2014 %>%
mutate(date = as.Date(date),
month = month(date),
year = year(date)) -> contribDB_2014
# Sample State Filters
unique(contribDB_2014$recipient.state)
table(contribDB_2014$contributor.state)
table(contribDB_2014$contributor.state)
contribDB_2014_TX <- filter(contribDB_2014, recipient.state == "TX" | )
contribDB_2014_TX <- filter(contribDB_2014, recipient.state == "TX" | contributor.state == "TX")
# All data, by party
ggplot(data = PoliticalIdeology) +
geom_point(mapping = aes(x = recipient_cfscore , y = total_receipts, color=party))
# Texas 2018
ggplot(data = subset(PoliticalIdeology, state=="TX" & cycle=="2018")) +
geom_point(mapping = aes(x = recipient_cfscore , y = total_receipts, color=party))
# Beto2014
ggplot(data = subset(contribDB_2014, recipient.name == "O ROURKE, ROBERT (BETO)")) +
geom_point(mapping = aes(x = date, y = contributor.cfscore, size = amount)) + theme_minimal() + labs(list(title='', x='', y='')) + theme(axis.ticks = element_blank(), axis.text.x = element_blank())
# Beto2014 abline
ggplot(data = subset(contribDB_2014, recipient.name == "O ROURKE, ROBERT (BETO)")) + geom_smooth(mapping = aes(x = date, y = contributor.cfscore), method="lm") + theme_minimal()
ggplot(data = subset(contribDB_2014, recipient.name == "SCALISE, STEPHEN J")) +
geom_point(mapping = aes(x = date, y = contributor.cfscore, size = amount)) + theme_minimal() + labs(list(title='', x='', y='')) + theme(axis.ticks = element_blank(), axis.text.x = element_blank())
ggplot(data = subset(contribDB_2014, recipient.name == "SCALISE, STEPHEN J")) + geom_point(mapping = aes(x = date, y = contributor.cfscore)) + geom_smooth(mapping = aes(x = date, y = contributor.cfscore), method="lm") + theme_minimal()
ggplot(data = subset(contribDB_2014, recipient.name == "PELOSI, NANCY")) + geom_point(mapping = aes(x = date, y = contributor.cfscore)) + geom_smooth(mapping = aes(x = date, y = contributor.cfscore), method="lm") + theme_minimal()
head(contribDB_2014)
head(PoliticalIdeology)
# Beto2014 trend line
ggplot(data = subset(contribDB_2014, recipient.name == "O ROURKE, ROBERT (BETO)")) + geom_point(mapping = aes(x = date, y = contributor.cfscore)) + geom_smooth(mapping = aes(x = date, y = contributor.cfscore), method="lm") + theme_minimal()
# Beto2014
ggplot(data = subset(contribDB_2014, recipient.name == "O ROURKE, ROBERT (BETO)")) +
geom_point(mapping = aes(x = date, y = contributor.cfscore, size = amount)) + theme_minimal() + labs(list(title='', x='', y='')) + theme(axis.ticks = element_blank(), axis.text.x = element_blank())
generic_ballot_history <- read_csv("Political_Data/generic-ballot-history.csv")
generic_ballot_history <- read_csv("data/generic-ballot-history.csv")
View(generic_ballot_history)
ggplot(data = generic_ballot_history) +
geom_smooth(mapping = aes(x = end_date, y = Democrat), color="blue") + theme_minimal() + labs(list(title='', x='', y='')) + theme(axis.ticks = element_blank(), axis.text.x = element_blank())
ggplot(data = generic_ballot_history) + theme_minimal() +
geom_point(mapping = aes(x = end_date, y = Democrat), color="blue") +
geom_smooth(mapping = aes(x = end_date, y = Democrat), color="blue") +
geom_point(mapping = aes(x = end_date, y = Republican), color="red") +
geom_smooth(mapping = aes(x = end_date, y = Republican), color="red") +
geom_point(mapping = aes(x = end_date, y = `Undecided/Other`), color="yellow") +
geom_smooth(mapping = aes(x = end_date, y = `Undecided/Other`), color="yellow") +
labs(list(title='Generic Polling, 2012-2018', x='', y='% Support'))
library(readxl)
American_Presidency_Project_Approval_Ratings_for_POTUS <- read_excel("data/presidential_approval/American Presidency Project - Approval Ratings for POTUS.xlsx",
col_types = c("text", "date", "date",
"numeric", "numeric", "numeric"))
View(American_Presidency_Project_Approval_Ratings_for_POTUS)
knitr::opts_chunk$set(echo = TRUE, cache = TRUE, message=FALSE, warning=FALSE)
approval <- read_excel("data/presidential_approval/American Presidency Project - Approval Ratings for POTUS.xlsx",
col_types = c("text", "date", "date",
"numeric", "numeric", "numeric"))
ggplot(data = approval, aes(x = 'Start Date', y = Approving)) +
geom_line()
library(tidyverse)
ggplot(data = approval, aes(x = 'Start Date', y = Approving)) +
geom_line()
summary(approval)
ggplot(approval, aes(Approving)) + geom_histogram()
ggplot(approval, aes(Approving)) + geom_histogram() + theme_minimal()
ggplot(approval, aes(x = 'Start Date', y = Approving, group = President, colour = President)) +
geom_line() +
facet_wrap(~ President)
ggplot(approval, aes(x = `Start Date`, y = Approving, group = President, colour = President)) +
geom_line() +
facet_wrap(~ President)
ggplot(data = approval, aes(x = `Start Date`, y = Approving)) +
geom_line()
ggplot(data = approval, aes(x = `Start Date`, y = Approving)) +
geom_line() +
theme_minimal()
ggplot(approval, aes(x = `Start Date`, y = Approving, group = President, colour = President)) +
geom_line() +
facet_wrap(~ President) +
theme_minimal()
ggplot(approval, aes(x = `Start Date`, y = Approving, group = President, colour = President)) +
geom_line() +
facet_wrap(.~ President) +
theme_minimal()
ggplot(approval, aes(x = `Start Date`, y = Approving, group = President, colour = President)) +
geom_line() +
facet_wrap(President) +
theme_minimal()
ggplot(approval, aes(x = `Start Date`, y = Approving, group = President, colour = President)) +
geom_line() +
facet_wrap(~President) +
theme_minimal()
ggplot(data = approval, aes(x = `Start Date`, y = Approving), color = President) +
geom_line() +
theme_minimal()
ggplot(data = approval, aes(x = `Start Date`, y = Approving), group = President, color = President) +
geom_line() +
theme_minimal()
ggplot(data = approval, aes(x = `Start Date`, y = Approving, group = President, color = President)) +
geom_line() +
theme_minimal()
knitr::opts_chunk$set(echo = TRUE, cache = TRUE, message=FALSE, warning=FALSE)
approval %>%
mutate(Approving_change = Approving - lead(Approving))
library(tidyverse)
approval %>%
mutate(Approving_change = Approving - lead(Approving))
View(approval)
Approving_change = Approving - lead(Approving),
Approving_change = Approving - lead(Approving),
approval %>%
mutate(
Approving_change = Approving - lead(Approving)
Disapproving_change = Disapproving - lead(Disapproving)) -> approval
approval %>%
mutate(
Approving_change = Approving - lead(Approving),
Disapproving_change = Disapproving - lead(Disapproving)) -> approval
ggplot(approval, aes(Approving_change)) + geom_histogram() + theme_minimal()
ggplot(approval, aes(Disapproving_change)) + geom_histogram() + theme_minimal()
summary(approval)
ls(approval)
knitr::opts_chunk$set(echo = TRUE, cache = TRUE, message=FALSE, warning=FALSE)
summary(approval, group=President)
approval %>%
mutate(month = month(`Start Date`)) -> approval
library(readxl)
library(tidyverse)
approval %>%
mutate(month = month(`Start Date`)) -> approval
library(lubridate)
approval %>%
mutate(month = month(`Start Date`)) -> approval
approval %>%
group_by(month) %>%
summarise(Approving_Month = mean(Approving))
approval %>%
group_by(month) %>%
summarise(Approving_Month = mean(Approving),
Disapproving_Month = mean(Disapproving))
approval %>%
group_by(month) %>%
summarise(Approving_Month = mean(Approving),
Disapproving_Month = mean(Disapproving),
`Unsure/NoData_Month` = `Unsure/NoData`)
approval %>%
group_by(month) %>%
summarise(Approving_Month = mean(Approving),
Disapproving_Month = mean(Disapproving),
`Unsure/NoData_Month` = mean(`Unsure/NoData`))
ggplot(approval, aes(`Unsure/NoData`)) + geom_histogram() + theme_minimal()
approval %>%
mutate(Approving_change = Approving - lead(Approving), Disapproving_change = Disapproving - lead(Disapproving),
`Unsure/NoData_change` = `Unsure/NoData` - lead(`Unsure/NoData`))
approval %>%
mutate(Approving_change = Approving - lead(Approving), Disapproving_change = Disapproving - lead(Disapproving),
`Unsure/NoData_change` = `Unsure/NoData` - lead(`Unsure/NoData`)) -> approval
ggplot(approval, aes(`Unsure/NoData_change`)) + geom_histogram() + theme_minimal()
ggplot(data = approval, aes(x = `Start Date`, y = `Unsure/NoData`, group = President, color = President)) +
geom_line() +
theme_minimal()
approval %>%
group_by(month) %>%
summarise(Approving_Month = mean(Approving),
Disapproving_Month = mean(Disapproving),
`Unsure/NoData_Month` = mean(`Unsure/NoData`))
approval %>%
group_by(month) %>%
summarise(Approving_Month = mean(Approving),
Disapproving_Month = mean(Disapproving),
`Unsure/NoData_Month` = mean(`Unsure/NoData`)) -> approval
ggplot(data = approval, aes(x = `Start Date`, y = Approving_month, group = President, color = President)) +
geom_line() +
theme_minimal()
View(approval)
approval <- read_excel("data/presidential_approval/American Presidency Project - Approval Ratings for POTUS.xlsx",
col_types = c("text", "date", "date",
"numeric", "numeric", "numeric"))
approval %>%
mutate(Approving_change = Approving - lead(Approving), Disapproving_change = Disapproving - lead(Disapproving),
`Unsure/NoData_change` = `Unsure/NoData` - lead(`Unsure/NoData`)) -> approval
approval %>%
mutate(month = month(`Start Date`)) -> approval
approval %>%
group_by(month) %>%
mutate(Approving_Month = mean(Approving),
Disapproving_Month = mean(Disapproving),
`Unsure/NoData_Month` = mean(`Unsure/NoData`))
approval %>%
group_by(month) %>%
mutate(Approving_Month = mean(Approving),
Disapproving_Month = mean(Disapproving),
`Unsure/NoData_Month` = mean(`Unsure/NoData`)) -> approval
View(approval)
ggplot(data = approval, aes(x = `Start Date`, y = Approving_month, group = President, color = President)) +
geom_line() +
theme_minimal()
ggplot(data = approval, aes(x = `Start Date`, y = Approving_Month, group = President, color = President)) +
geom_line() +
theme_minimal()
